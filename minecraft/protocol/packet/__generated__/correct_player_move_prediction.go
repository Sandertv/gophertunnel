// Code generated by protocol/packet generator; DO NOT EDIT.
// Generated at:       2025-12-12T23:58:34Z
// Minecraft version:  1.21.130
// Protocol version:   897
// Packet ID:          161 (0xA1)

package packet

import (
	"github.com/go-gl/mathgl/mgl32"
	"github.com/sandertv/gophertunnel/minecraft/protocol"
)

const (
	RewindTypePlayer = iota
	RewindTypeVehicle
)

// CorrectPlayerMovePrediction Sent to a player when their simulation of movement mismatches enough from the server that it wants to correct the client.
type CorrectPlayerMovePrediction struct {
	// PredictionType Vehicle or Player Prediction
	PredictionType uint8
	// Pos Corrected position
	Pos mgl32.Vec3
	// PosDelta Corrected velocity
	PosDelta mgl32.Vec3
	// Rotation Corrected rotation. Only sent when PredictionType is Vehicle
	Rotation mgl32.Vec2
	// VehicleAngularVelocity Angular Velocity for a vehicle. Only sent when PredictionType is Vehicle
	VehicleAngularVelocity protocol.Optional[float32]
	// OnGround Is on ground
	OnGround bool
	// Tick Which frame we're correcting; should match the tick in the Player Auth Input packet
	Tick uint64
}

// ID ...
func (*CorrectPlayerMovePrediction) ID() uint32 {
	return IDCorrectPlayerMovePrediction
}

func (pk *CorrectPlayerMovePrediction) Marshal(io protocol.IO) {
	io.Uint8(&pk.PredictionType)
	io.Vec3(&pk.Pos)
	io.Vec3(&pk.PosDelta)
	io.Vec2(&pk.Rotation)
	protocol.OptionalFunc(io, &pk.VehicleAngularVelocity, io.Float32)
	io.Bool(&pk.OnGround)
	io.Varuint64(&pk.Tick)
}
